---
marp: true
author: caquintella@gmail.com
paginate: true
theme: default
---

# Bibliotecas #

 Professor: Carlos Alvaro Quintella
 
 ---
 
## Divisão do código em arquivos ##
   
A divisão do código em arquivos é uma prática comum na programação e consiste em separar o código-fonte de
um programa em vários arquivos menores e mais organizados. Essa técnica é útil para tornar o código mais legível, modular e fácil de manter.
  
---

Existem diferentes práticas e autores que propõem a divisão do código em arquivos: 
* Um dos mais conhecidos é o autor Steve McConnell, que em seu livro "Code Complete" recomenda
a criação de arquivos separados para cada função, separação de interface e implementação,
 e separação de código para diferentes tipos de dados.
* Outra prática comum é a separação de código em módulos,
onde cada módulo contém um conjunto de funções ou recursos relacionados. 
Essa abordagem é utilizada em linguagens como o Python, onde cada arquivo é considerado um módulo.
* Além disso, muitas linguagens de programação possuem um sistema de módulos ou bibliotecas, que permitem que o código seja dividido em arquivos e compartilhado entre diferentes programas. Essas bibliotecas geralmente contêm funções e recursos comuns, como funções matemáticas, manipulação de arquivos, interface gráfica, entre outros.

 ---
Em C existem diferentes possibilidades para dividir o código em arquivos separados. 
Algumas opções incluem:

* Separar por tipo de função: separar funções específicas, como funções de entrada e saída, funções matemáticas, funções de manipulação de arquivos, etc.
* Separar por módulo: separar o código em módulos, onde cada módulo contém um conjunto de funções ou recursos relacionados.
* Separar por camada: separar o código em diferentes camadas, como a camada de apresentação, camada de negócios e camada de dados.
* Separar por objetivo: separar o código com base em seu objetivo, como separar o código de inicialização e configuração do código de execução principal.
  
---
  
## Poruqe dividir ##

O desenvolvimento de software em C pode se tornar complexo, especialmente quando o código começa a crescer e se tornar difícil de gerenciar.
Um módulo em C geralmente se refere a um arquivo fonte (.c) que contém uma ou mais funções que podem ser compiladas em um programa. 
Ele é usado para organizar o código em uma estrutura modular e para dividir o código em partes menores e mais gerenciáveis.
  
---

Suponha que temos um programa em C que precisa realizar operações matemáticas básicas, 
como adição, subtração, multiplicação e divisão. 
Podemos criar um módulo de operações matemáticas, que conteria as funções para realizar essas operações.
Um exemplo de código para esse módulo seria:
  
### Mas o que é uma biblioteca ###
  
Bibliotecas são conjuntos de códigos fonte, objetos ou binários pré-compilados que podem ser reutilizados em outros programas para executar funções comuns.
As bibliotecas são importantes porque permitem que os desenvolvedores reutilizem códigos já existentes, economizando tempo e esforço na criação de novas funcionalidades.
As bibliotecas podem ser fornecidas pela plataforma de desenvolvimento, por terceiros ou criadas pelos próprios desenvolvedores. Em linguagem C, as bibliotecas são frequentemente fornecidas como arquivos de cabeçalho (.h) e arquivos de biblioteca (.lib ou .a).
Além das bibliotecas padrão podemos usar outras bibliotecas para dar mais funcionalidades aos nossos programas C, elas pode ser tanto feitas por nós quanto pela comunidade.

---

## Vantagens e desvantagens do uso de bibliotecas ##
  
Quando se trabalha com algoritmos complexos, dividir o código em partes menores pode ser extremamente útil. Isso permite que cada parte seja trabalhada de forma independente e possa ser testada separadamente. Além disso, a divisão em bibliotecas também permite a reutilização de código em diferentes projetos, o que economiza tempo e esforço.
Outro benefício da divisão em bibliotecas é a possibilidade de aumentar a legibilidade do código. Um arquivo grande e complexo pode ser difícil de entender, mas dividir o código em partes menores torna-o mais fácil de ler e compreender.
  
  
---
  
## Técnicas para dividir o código em C ###
  
Técnicas para dividir um programa em vários arquivos:

1. Separar o código em diferentes módulos: essa técnica é útil para organizar o código em diferentes partes lógicas, e é comumente usada em projetos grandes. Cada módulo contém um conjunto de funções que se relacionam entre si. Um exemplo de um projeto dividido em módulos pode ser um programa que simula um jogo de xadrez, com módulos para gerenciamento de jogadores, tabuleiro, movimentos de peças, etc.
2. Separar o código em diferentes arquivos por tipo de função: essa técnica é mais simples do que a anterior, e consiste em separar as funções em diferentes arquivos por tipo de função, como um arquivo para funções de entrada e saída, um arquivo para funções matemáticas, e assim por diante. Um exemplo seria um programa que calcula a média de notas de alunos, com arquivos separados para entrada e saída, cálculo da média e validação das notas.
3. Separar o código em diferentes arquivos por tipo de dados: essa técnica consiste em separar o código em diferentes arquivos por tipo de dados, como um arquivo para estruturas de dados, um arquivo para funções de manipulação de arquivos, etc. Um exemplo seria um programa de processamento de imagens, com arquivos separados para manipulação de imagens, conversão de formatos, etc.
3, Usar bibliotecas: essa técnica consiste em usar bibliotecas de funções predefinidas em vez de escrever o código do zero. As bibliotecas podem ser incluídas diretamente no programa ou podem ser usadas por meio de um arquivo de cabeçalho. Um exemplo seria um programa que usa a biblioteca matemática padrão para calcular funções matemáticas complexas.

Independentemente da técnica utilizada, é importante dividir o código em arquivos de forma que o programa seja fácil de entender, manter e modificar. Ao dividir o código em partes menores, o programa se torna mais modular, o que facilita a depuração e a reutilização do código.
  
### como usar ###
Você pode incluir bibliotecas no seu programa usando a diretiva **#include**.

A inclusão de bilbiotecas pode acontecer de duas formas:

* de forma estática, adicionadas na compilação, (extensão .a) ou
* de forma *dinâmica* : São as bibliotecas que são ligadas ao programa invocador depois que a execução do mesmo é iniciada(usam extensão: .so).

---

## Bibliotecas padrão do C ##

* math.h : funções matemáticas, arredondamento, trigonometricas, exponencialização e outras.
* stdio.h: Entrada e saída padrão.
* stdlib.h: Responsável por manipulação e alocação de memória/ conversão de tipos
* threads.h: Trabalhar execução concorrente em threads.
* string.h: comparação e manipulação e strings.
* locale.h: localização.
* time.h: funções, variáveis, e macros para manipulação de unidades de tempo.

[site de C na UFSCAR](https://petbcc.ufscar.br/time/)

---

## Bibliotecas ligadas  de forma Estática ##

São as bibliotecas cujo código é ligado ao
programa invocador durante a construção (build) do seu executável.

---

### Vantagens do uso de bibliotecas estáticas ###

* Não há o risco de não se localizar uma biblioteca em tempo de execução;
* O código das funções da biblioteca que um programa utiliza é adicionado ao seu executável final;
* A versão das bibliotecas é fixa, portanto, não há o perigo de incompatibilidade de versões.
* Mudanças posteriores no comportamento das bibliotecas novas não afetam a corretude dos programas antigos.
* A carga de programas com bibliotecas estáticas é mais rápida.

---

### Desvantagens do uso de bibliotecas estáticas ###

* Tamanho do arquivo executável fica maior
* O código da biblioteca é adicionados ao código executável mesmo que em tempo de execução ele não seja usado.

---

## Uso de Bibliotecas de forma Dinâmica ##

Você utiliza bibliotecas que são compatilhadas e que já estão compiladas (.dlls do Windows e as bibliotecas do /usr/lib do Unix).

O uso pode ocorrer de duas maneiras:

* Na inicialização, quando o programa é carregado para execução, todas as bibliotecas dinâmicas que ele
referencia também são carregadas com ele, ou

* Lazy load, a biblioteca só é carregada quando ela for necessária para a continuidade da execução do programa.

---

### Vantagens do uso de bibliotecas dinâmicas ###

do uso das bibliotecas ligadas de forma dinâmica:

* Compartilhamento entre os vários programas que as usam (tanto na memória quanto no disco).
* Menor uso de memória na máquina como um todo (imagine o que aconteceria se a libc fosse estática...)
* Novas versões (com melhorias ou correções) das bibliotecas são aproveitadas mesmo pelos programas mais antigos.

---

### Desvantagens do uso de bibliotecas dinâmicas ###

* A carga de programas com bibliotecas dinâmicas pode ser mais lenta.
* “DLL hell” - complicações frequentes relacionadas ao uso de bibliotecas dinâmicas nas versões mais antigas do Windows.

---

Usage of LD_LIBRARY_PATH variable
In UNIX/Linux System LD_LIBRARY_PATH to tell dynamic link loader, a small program that begins all your applications, to determine where to look for dynamic shared libraries that an application was linked with. A colon (:) separates a list of directories, and this list is checked even before built-in search path/paths and conventional locations like (/lib, /usr/lib..). Some other uses of LD_LIBRARY_PATH are:     Comparing new versions of a shared library to an application that has previously been compiled.     Relocation of shared libraries, for example, to keep previous versions alive.     It is also used to create a self-sufficient system, relocatable environment for bigger applications so that they are independent of changing system libraries.  
<https://linuxhint.com/what-is-ld-library-path/>

                      
## Links ##
                      
[Uso de Módulos em C](https://www.youtube.com/watch?v=fOX2h6zNejU)
 
